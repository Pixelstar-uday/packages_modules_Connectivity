{
  "presubmit": [
    {
      "name": "ConnectivityCoverageTests"
    },
    // Run in addition to mainline-presubmit as mainline-presubmit is not
    // supported in every branch.
    // CtsNetTestCasesLatestSdk uses stable API shims, so does not exercise
    // some latest APIs. Run CtsNetTestCases to get coverage of newer APIs.
    {
      "name": "CtsNetTestCases",
      "options": [
        {
          "exclude-annotation": "com.android.testutils.SkipPresubmit"
        },
        {
          "exclude-annotation": "androidx.test.filters.RequiresDevice"
        }
      ]
    },
    {
      "name": "TetheringTests"
    },
    {
      "name": "TetheringIntegrationTests"
    },
    {
      "name": "traffic_controller_unit_test"
    }
  ],
  "postsubmit": [
    {
      "name": "TetheringPrivilegedTests"
    },
    // TODO: move to presubmit when known green.
    {
      "name": "bpf_existence_test"
    },
    {
      "name": "libclat_test"
    },
    {
      "name": "traffic_controller_unit_test",
      "keywords": ["netd-device-kernel-4.9", "netd-device-kernel-4.14"]
    }
  ],
  "mainline-presubmit": [
    {
      "name": "CtsNetTestCasesLatestSdk[CaptivePortalLoginGoogle.apk+NetworkStackGoogle.apk+com.google.android.resolv.apex+com.google.android.tethering.apex]",
      "options": [
        {
          "exclude-annotation": "com.android.testutils.SkipPresubmit"
        },
        {
          "exclude-annotation": "androidx.test.filters.RequiresDevice"
        }
      ]
    },
    {
      "name": "ConnectivityCoverageTests[CaptivePortalLoginGoogle.apk+NetworkStackGoogle.apk+com.google.android.resolv.apex+com.google.android.tethering.apex]"
    },
    {
      "name": "traffic_controller_unit_test[CaptivePortalLoginGoogle.apk+NetworkStackGoogle.apk+com.google.android.resolv.apex+com.google.android.tethering.apex]"
    }
  ],
  "mainline-postsubmit": [
    // Tests on physical devices with SIM cards: postsubmit only for capacity constraints
    {
      "name": "CtsNetTestCasesLatestSdk[CaptivePortalLoginGoogle.apk+NetworkStackGoogle.apk+com.google.android.resolv.apex+com.google.android.tethering.apex]",
      "keywords": ["sim"]
    },
    {
      "name": "TetheringCoverageTests[CaptivePortalLoginGoogle.apk+NetworkStackGoogle.apk+com.google.android.resolv.apex+com.google.android.tethering.apex]"
    },
    // TODO: move to mainline-presubmit when known green.
    {
      "name": "bpf_existence_test[CaptivePortalLoginGoogle.apk+NetworkStackGoogle.apk+com.google.android.resolv.apex+com.google.android.tethering.apex]"
    }
  ],
  "imports": [
    {
      "path": "frameworks/base/core/java/android/net"
    },
    {
      "path": "frameworks/opt/net/ethernet"
    },
    {
      "path": "packages/modules/NetworkStack"
    },
    {
      "path": "packages/modules/CaptivePortalLogin"
    },
    {
      "path": "packages/modules/Connectivity"
    },
    {
      "path": "packages/modules/Connectivity/Tethering"
    }
  ]
}
